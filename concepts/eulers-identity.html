<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Euler's Identity - MathVerse | Math Help</title>
    <meta name="description" content="Explore Euler's Identity (e^(iπ) + 1 = 0) through interactive visualizations and explanations from elementary to research level.">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="../../ad-styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    
    <!-- Visualization Libraries -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    
    <style>
        .concept-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .concept-equation {
            font-size: 3em;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: inline-block;
        }
        
        .beauty-quote {
            font-style: italic;
            font-size: 1.2em;
            opacity: 0.9;
            margin-top: 20px;
        }
        
        .level-navigation {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: -40px auto 40px;
            max-width: 800px;
            position: relative;
            z-index: 10;
        }
        
        .level-slider {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .level-input {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #e0e0e0;
            outline: none;
        }
        
        .level-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }
        
        .level-label {
            font-weight: bold;
            min-width: 150px;
        }
        
        .explanation-section {
            background: #f8f9fa;
            padding: 40px;
            border-radius: 12px;
            margin: 20px 0;
            min-height: 300px;
            transition: all 0.3s ease;
        }
        
        .visualization-container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: 40px 0;
        }
        
        .interactive-controls {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .control-button {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .control-button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .connection-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .connection-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .connection-type {
            font-size: 0.8em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .prerequisites-section {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .applications-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            margin: 40px 0;
        }
        
        .application-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .application-item {
            text-align: center;
        }
        
        .application-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .proof-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            margin: 40px 0;
        }
        
        .proof-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .proof-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }
        
        .proof-tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }
        
        .proof-content {
            padding: 20px 0;
        }
        
        .history-timeline {
            position: relative;
            padding: 40px 0;
        }
        
        .timeline-item {
            display: flex;
            align-items: center;
            margin: 30px 0;
        }
        
        .timeline-date {
            min-width: 100px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .timeline-content {
            flex: 1;
            padding-left: 30px;
            border-left: 2px solid #e0e0e0;
        }
        
        .why-care-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin: 40px 0;
            text-align: center;
        }
        
        .impact-tree {
            width: 100%;
            height: 400px;
            margin: 20px 0;
        }
        
        #rotation-viz {
            width: 100%;
            height: 400px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }
        
        #complex-plane-viz {
            width: 100%;
            height: 400px;
        }
        
        .formula-breakdown {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .formula-part {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .formula-part:hover {
            background: #e8f4f8;
            transform: scale(1.05);
        }
        
        .formula-symbol {
            font-size: 2em;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <h1 class="site-title">Math Help</h1>
            <p class="tagline">MathVerse - Understanding Mathematics</p>
        </div>
    </header>
    
    <nav class="main-nav">
        <div class="container">
            <ul class="nav-list">
                <li><a href="/">Home</a></li>
                <li><a href="/mathverse.html">MathVerse</a></li>
                <li><a href="/concepts/">Concepts</a></li>
                <li><a href="/concepts/eulers-identity.html" class="active">Euler's Identity</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <!-- Concept Header -->
        <section class="concept-header">
            <div class="container">
                <h1>Euler's Identity</h1>
                <div class="concept-equation">e<sup>iπ</sup> + 1 = 0</div>
                <p class="beauty-quote">"The most beautiful equation in mathematics" - Richard Feynman</p>
            </div>
        </section>

        <div class="container">
            <!-- Level Navigation -->
            <div class="level-navigation">
                <div class="level-slider">
                    <label class="level-label" id="level-display">Level 5: High School</label>
                    <input type="range" class="level-input" id="level-slider" min="1" max="10" value="5">
                    <button class="control-button" onclick="setUserLevel()">Set My Level</button>
                </div>
            </div>

            <!-- Prerequisites Check -->
            <div class="prerequisites-section" id="prerequisites">
                <h3>📚 Prerequisites for this level:</h3>
                <p>To understand Euler's Identity at this level, you should be familiar with:</p>
                <ul>
                    <li><a href="/concepts/exponents.html">Exponents and Powers</a></li>
                    <li><a href="/concepts/complex-numbers.html">Complex Numbers (basic)</a></li>
                    <li><a href="/concepts/trigonometry.html">Basic Trigonometry</a></li>
                </ul>
            </div>

            <!-- Main Explanation -->
            <div class="explanation-section" id="main-explanation">
                <h2 id="explanation-title">Understanding Euler's Identity - High School Level</h2>
                <div id="explanation-content">
                    <p>Euler's Identity is often called the most beautiful equation in mathematics because it connects five fundamental mathematical constants in one elegant relationship:</p>
                    
                    <div class="formula-breakdown">
                        <div class="formula-part">
                            <div class="formula-symbol">e</div>
                            <div>Euler's number<br>≈ 2.71828...</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">i</div>
                            <div>Imaginary unit<br>√(-1)</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">π</div>
                            <div>Pi<br>≈ 3.14159...</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">1</div>
                            <div>Unity<br>The multiplicative identity</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">0</div>
                            <div>Zero<br>The additive identity</div>
                        </div>
                    </div>
                    
                    <p>Think of it this way: if you rotate around a circle by π radians (180°), you end up at -1. Euler discovered that this rotation can be expressed using the exponential function with imaginary numbers!</p>
                </div>
            </div>

            <!-- Interactive Visualization -->
            <div class="visualization-container">
                <h2>See It In Action: Rotation in the Complex Plane</h2>
                <div id="rotation-viz"></div>
                <div class="interactive-controls">
                    <button class="control-button" onclick="startAnimation()">Start Animation</button>
                    <button class="control-button" onclick="pauseAnimation()">Pause</button>
                    <button class="control-button" onclick="resetAnimation()">Reset</button>
                    <button class="control-button" onclick="showSteps()">Show Step by Step</button>
                </div>
            </div>

            <!-- Complex Plane Visualization -->
            <div class="visualization-container">
                <h2>The Journey on the Complex Plane</h2>
                <div id="complex-plane-viz"></div>
            </div>

            <!-- Why Should I Care? -->
            <div class="why-care-section">
                <h2>Why Should I Care? 🤔</h2>
                <p>Euler's Identity isn't just mathematical beauty - it powers the technology you use every day!</p>
                <div class="application-grid">
                    <div class="application-item">
                        <div class="application-icon">📱</div>
                        <h4>Signal Processing</h4>
                        <p>Your phone's ability to process audio and video</p>
                    </div>
                    <div class="application-item">
                        <div class="application-icon">🌊</div>
                        <h4>Quantum Physics</h4>
                        <p>Describing wave functions and particle behavior</p>
                    </div>
                    <div class="application-item">
                        <div class="application-icon">💡</div>
                        <h4>Electrical Engineering</h4>
                        <p>AC circuit analysis and power systems</p>
                    </div>
                    <div class="application-item">
                        <div class="application-icon">🎵</div>
                        <h4>Music Production</h4>
                        <p>Digital audio synthesis and compression</p>
                    </div>
                </div>
            </div>

            <!-- Connections -->
            <div class="connections-section">
                <h2>Connected Concepts</h2>
                <div class="connections-grid">
                    <div class="connection-card" onclick="navigateTo('/concepts/complex-numbers.html')">
                        <div class="connection-type">Foundation</div>
                        <h4>Complex Numbers</h4>
                        <p>The number system that makes this identity possible</p>
                    </div>
                    <div class="connection-card" onclick="navigateTo('/concepts/taylor-series.html')">
                        <div class="connection-type">Deeper Understanding</div>
                        <h4>Taylor Series</h4>
                        <p>How we prove this identity rigorously</p>
                    </div>
                    <div class="connection-card" onclick="navigateTo('/concepts/fourier-transform.html')">
                        <div class="connection-type">Application</div>
                        <h4>Fourier Transform</h4>
                        <p>Signal processing powerhouse</p>
                    </div>
                    <div class="connection-card" onclick="navigateTo('/concepts/trigonometry.html')">
                        <div class="connection-type">Related</div>
                        <h4>Trigonometry</h4>
                        <p>Sine and cosine hidden within</p>
                    </div>
                </div>
            </div>

            <!-- Proofs -->
            <div class="proof-section">
                <h2>Multiple Ways to Understand</h2>
                <div class="proof-tabs">
                    <button class="proof-tab active" onclick="showProof('visual')">Visual</button>
                    <button class="proof-tab" onclick="showProof('series')">Series Expansion</button>
                    <button class="proof-tab" onclick="showProof('geometric')">Geometric</button>
                    <button class="proof-tab" onclick="showProof('formal')">Formal</button>
                </div>
                <div class="proof-content" id="proof-content">
                    <h3>Visual Understanding</h3>
                    <p>Watch as we trace the path of e<sup>it</sup> as t goes from 0 to π. The point moves along the unit circle, starting at 1 and ending at -1.</p>
                    <div id="visual-proof"></div>
                </div>
            </div>

            <!-- Historical Context -->
            <div class="history-section">
                <h2>Historical Journey</h2>
                <div class="history-timeline">
                    <div class="timeline-item">
                        <div class="timeline-date">1748</div>
                        <div class="timeline-content">
                            <h4>Euler's Discovery</h4>
                            <p>Leonhard Euler first published this identity in his "Introductio in analysin infinitorum"</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">1700s</div>
                        <div class="timeline-content">
                            <h4>Building Blocks</h4>
                            <p>The constants e, i, and π were already known, but their connection was revolutionary</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">1800s</div>
                        <div class="timeline-content">
                            <h4>Mathematical Impact</h4>
                            <p>The identity became central to complex analysis and physics</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-date">Today</div>
                        <div class="timeline-content">
                            <h4>Modern Applications</h4>
                            <p>Essential in quantum mechanics, signal processing, and electrical engineering</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Impact Visualization -->
            <div class="visualization-container">
                <h2>Impact Tree: From Euler to Your Smartphone</h2>
                <div id="impact-tree"></div>
            </div>
        </div>
    </main>

    <script>
        // Level management
        const levelDescriptions = {
            1: "Elementary (Ages 6-8)",
            2: "Elementary (Ages 9-11)",
            3: "Middle School",
            4: "Early High School",
            5: "High School",
            6: "AP/Early Undergrad",
            7: "Undergraduate",
            8: "Advanced Undergrad",
            9: "Graduate",
            10: "Research"
        };

        const explanations = {
            1: {
                title: "Euler's Identity - Elementary Level",
                content: `
                    <p>Imagine you have a magical spinner that always lands on special numbers. When you spin it in a very special way, something amazing happens - all the most important numbers in math come together to make zero!</p>
                    <p>It's like having puzzle pieces that fit together perfectly: the number e (a special growing number), i (an imaginary friend number), π (the circle number), 1, and 0 all connect in one beautiful pattern!</p>
                    <p>🎯 Fun fact: This equation uses numbers from counting (0, 1), geometry (π), and even imaginary numbers (i)!</p>
                `,
                prerequisites: ["Counting", "Basic shapes", "The number zero"]
            },
            2: {
                title: "Euler's Identity - Elementary Level (Ages 9-11)",
                content: `
                    <p>Euler's Identity is like a mathematical treasure that connects five super important numbers:</p>
                    <ul>
                        <li><strong>e</strong> ≈ 2.718... (a number that shows up when things grow)</li>
                        <li><strong>i</strong> = √(-1) (an imaginary number we invented to solve new problems)</li>
                        <li><strong>π</strong> ≈ 3.14... (the number that relates a circle's width to its edge)</li>
                        <li><strong>1</strong> (the first counting number)</li>
                        <li><strong>0</strong> (nothing, but super important!)</li>
                    </ul>
                    <p>When we combine them in this special way: e<sup>iπ</sup> + 1 = 0, they equal exactly zero! It's like finding out that your five favorite toys can build one perfect castle!</p>
                `,
                prerequisites: ["Multiplication", "Exponents (powers)", "Decimals"]
            },
            3: {
                title: "Euler's Identity - Middle School Level",
                content: `
                    <p>Euler's Identity connects five fundamental mathematical constants in one equation: e<sup>iπ</sup> + 1 = 0</p>
                    <p>Here's what each part means:</p>
                    <ul>
                        <li><strong>e ≈ 2.71828...</strong> - Euler's number, which appears in exponential growth</li>
                        <li><strong>i</strong> - The imaginary unit, where i² = -1</li>
                        <li><strong>π ≈ 3.14159...</strong> - The ratio of a circle's circumference to its diameter</li>
                    </ul>
                    <p>This identity is actually a special case of Euler's formula: e<sup>ix</sup> = cos(x) + i·sin(x)</p>
                    <p>When x = π: e<sup>iπ</sup> = cos(π) + i·sin(π) = -1 + 0i = -1</p>
                    <p>Therefore: e<sup>iπ</sup> + 1 = 0</p>
                `,
                prerequisites: ["Basic trigonometry", "Exponents", "Introduction to complex numbers"]
            },
            5: {
                title: "Understanding Euler's Identity - High School Level",
                content: `
                    <p>Euler's Identity is often called the most beautiful equation in mathematics because it connects five fundamental mathematical constants in one elegant relationship:</p>
                    
                    <div class="formula-breakdown">
                        <div class="formula-part">
                            <div class="formula-symbol">e</div>
                            <div>Euler's number<br>≈ 2.71828...</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">i</div>
                            <div>Imaginary unit<br>√(-1)</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">π</div>
                            <div>Pi<br>≈ 3.14159...</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">1</div>
                            <div>Unity<br>The multiplicative identity</div>
                        </div>
                        <div class="formula-part">
                            <div class="formula-symbol">0</div>
                            <div>Zero<br>The additive identity</div>
                        </div>
                    </div>
                    
                    <p>Think of it this way: if you rotate around a circle by π radians (180°), you end up at -1. Euler discovered that this rotation can be expressed using the exponential function with imaginary numbers!</p>
                `,
                prerequisites: ["Exponents and Powers", "Complex Numbers (basic)", "Basic Trigonometry"]
            },
            7: {
                title: "Euler's Identity - Undergraduate Level",
                content: `
                    <p>Euler's Identity e<sup>iπ</sup> + 1 = 0 is a special case of Euler's formula: e<sup>ix</sup> = cos(x) + i sin(x)</p>
                    
                    <p><strong>Derivation via Taylor Series:</strong></p>
                    <p>Starting with the Taylor series expansions:</p>
                    <ul>
                        <li>e<sup>x</sup> = Σ(x<sup>n</sup>/n!) = 1 + x + x²/2! + x³/3! + ...</li>
                        <li>cos(x) = Σ((-1)<sup>n</sup>x<sup>2n</sup>/(2n)!) = 1 - x²/2! + x⁴/4! - ...</li>
                        <li>sin(x) = Σ((-1)<sup>n</sup>x<sup>2n+1</sup>/(2n+1)!) = x - x³/3! + x⁵/5! - ...</li>
                    </ul>
                    
                    <p>Substituting x = iθ into e<sup>x</sup> and using i² = -1, i³ = -i, i⁴ = 1, ...:</p>
                    <p>e<sup>iθ</sup> = 1 + iθ - θ²/2! - iθ³/3! + θ⁴/4! + ...</p>
                    <p>= (1 - θ²/2! + θ⁴/4! - ...) + i(θ - θ³/3! + θ⁵/5! - ...)</p>
                    <p>= cos(θ) + i sin(θ)</p>
                    
                    <p>When θ = π: e<sup>iπ</sup> = cos(π) + i sin(π) = -1 + 0i = -1</p>
                `,
                prerequisites: ["Complex Analysis", "Taylor Series", "Linear Algebra"]
            },
            10: {
                title: "Euler's Identity - Research Level",
                content: `
                    <p>Euler's Identity represents a fundamental relationship in the theory of Lie groups and algebraic topology. It's a specific instance of the exponential map from the Lie algebra of U(1) to the Lie group itself.</p>
                    
                    <p><strong>Lie Group Perspective:</strong></p>
                    <p>The complex exponential e<sup>iθ</sup> generates the unitary group U(1) = {z ∈ ℂ : |z| = 1}. The exponential map exp: iℝ → U(1) is a group homomorphism from the additive group (iℝ, +) to the multiplicative group (U(1), ×).</p>
                    
                    <p><strong>Connections to:</strong></p>
                    <ul>
                        <li>Pontryagin duality and harmonic analysis on locally compact abelian groups</li>
                        <li>The Riemann zeta function via ζ(s) = Π(1 - p<sup>-s</sup>)<sup>-1</sup></li>
                        <li>Modular forms and the theory of L-functions</li>
                        <li>Quantum field theory through the path integral formulation</li>
                    </ul>
                    
                    <p><strong>Category Theory View:</strong></p>
                    <p>The identity exemplifies a natural transformation between functors in the category of topological spaces, connecting the exponential functor with the product of trigonometric functors.</p>
                `,
                prerequisites: ["Lie Theory", "Algebraic Topology", "Category Theory", "Complex Analysis"]
            }
        };

        // Initialize level
        const levelSlider = document.getElementById('level-slider');
        const levelDisplay = document.getElementById('level-display');
        const explanationTitle = document.getElementById('explanation-title');
        const explanationContent = document.getElementById('explanation-content');
        const prerequisites = document.getElementById('prerequisites');

        levelSlider.addEventListener('input', function() {
            const level = parseInt(this.value);
            updateLevel(level);
        });

        function updateLevel(level) {
            levelDisplay.textContent = `Level ${level}: ${levelDescriptions[level]}`;
            
            const levelData = explanations[level] || explanations[5];
            explanationTitle.textContent = levelData.title;
            explanationContent.innerHTML = levelData.content;
            
            if (levelData.prerequisites) {
                prerequisites.innerHTML = `
                    <h3>📚 Prerequisites for this level:</h3>
                    <p>To understand Euler's Identity at this level, you should be familiar with:</p>
                    <ul>
                        ${levelData.prerequisites.map(prereq => `<li>${prereq}</li>`).join('')}
                    </ul>
                `;
            }
        }

        // Complex plane visualization using p5.js
        let angle = 0;
        let tracing = [];
        let animating = false;

        function setup() {
            const canvas = createCanvas(document.getElementById('rotation-viz').offsetWidth, 400);
            canvas.parent('rotation-viz');
            angleMode(RADIANS);
        }

        function draw() {
            background(255);
            translate(width/2, height/2);
            
            // Draw axes
            stroke(200);
            line(-width/2, 0, width/2, 0);
            line(0, -height/2, 0, height/2);
            
            // Draw unit circle
            noFill();
            stroke(100);
            circle(0, 0, 200);
            
            // Draw angle arc
            fill(100, 100, 255, 50);
            arc(0, 0, 80, 80, 0, -angle);
            
            // Calculate position
            const x = 100 * cos(angle);
            const y = -100 * sin(angle);
            
            // Draw radius
            stroke(0, 0, 255);
            line(0, 0, x, y);
            
            // Draw point
            fill(255, 0, 0);
            noStroke();
            circle(x, y, 10);
            
            // Add to trace
            if (animating && tracing.length < 100) {
                tracing.push({x: x, y: y});
            }
            
            // Draw trace
            stroke(255, 0, 0, 100);
            noFill();
            beginShape();
            for (let p of tracing) {
                vertex(p.x, p.y);
            }
            endShape();
            
            // Labels
            fill(0);
            noStroke();
            textAlign(CENTER);
            text('1', 110, 5);
            text('-1', -110, 5);
            text('i', 5, -110);
            text('-i', 5, 110);
            
            // Show angle
            text(`θ = ${angle.toFixed(2)}`, 0, -140);
            text(`e^(iθ) = ${cos(angle).toFixed(3)} + ${sin(angle).toFixed(3)}i`, 0, -160);
            
            // Animate
            if (animating && angle < PI) {
                angle += 0.02;
            } else if (angle >= PI) {
                angle = PI;
                animating = false;
            }
        }

        function startAnimation() {
            animating = true;
            angle = 0;
            tracing = [];
        }

        function pauseAnimation() {
            animating = false;
        }

        function resetAnimation() {
            angle = 0;
            tracing = [];
            animating = false;
        }

        function showSteps() {
            // Implementation for step-by-step visualization
            alert('Step-by-step mode coming soon!');
        }

        // Complex plane journey visualization
        function createComplexPlaneJourney() {
            const trace = {
                x: [],
                y: [],
                mode: 'lines+markers',
                type: 'scatter',
                name: 'e^(it) path',
                line: {
                    color: 'rgb(255, 0, 0)',
                    width: 3
                },
                marker: {
                    size: 8,
                    color: 'rgb(255, 0, 0)'
                }
            };
            
            // Generate path
            for (let t = 0; t <= Math.PI; t += Math.PI/50) {
                trace.x.push(Math.cos(t));
                trace.y.push(Math.sin(t));
            }
            
            // Unit circle
            const circle = {
                x: [],
                y: [],
                mode: 'lines',
                type: 'scatter',
                name: 'Unit circle',
                line: {
                    color: 'rgb(0, 0, 255)',
                    width: 2,
                    dash: 'dot'
                }
            };
            
            for (let t = 0; t <= 2*Math.PI; t += 0.1) {
                circle.x.push(Math.cos(t));
                circle.y.push(Math.sin(t));
            }
            
            // Key points
            const points = {
                x: [1, 0, -1],
                y: [0, 1, 0],
                mode: 'markers+text',
                type: 'scatter',
                name: 'Key points',
                text: ['Start: 1', 'i', 'End: -1'],
                textposition: 'top center',
                marker: {
                    size: 12,
                    color: ['green', 'blue', 'red']
                }
            };
            
            const layout = {
                title: 'Journey of e^(it) from t=0 to t=π',
                xaxis: {
                    title: 'Real axis',
                    range: [-1.5, 1.5],
                    zeroline: true
                },
                yaxis: {
                    title: 'Imaginary axis',
                    range: [-1.5, 1.5],
                    zeroline: true,
                    scaleanchor: 'x'
                },
                showlegend: true,
                width: document.getElementById('complex-plane-viz').offsetWidth,
                height: 400
            };
            
            Plotly.newPlot('complex-plane-viz', [circle, trace, points], layout);
        }

        // Impact tree visualization
        function createImpactTree() {
            const width = document.getElementById('impact-tree').offsetWidth;
            const height = 400;
            
            const svg = d3.select('#impact-tree')
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            const data = {
                name: "Euler's Identity",
                children: [
                    {
                        name: "Complex Analysis",
                        children: [
                            { name: "Fourier Transform", size: 100 },
                            { name: "Laplace Transform", size: 80 },
                            { name: "Z-Transform", size: 60 }
                        ]
                    },
                    {
                        name: "Physics",
                        children: [
                            { name: "Quantum Mechanics", size: 120 },
                            { name: "Wave Equations", size: 100 },
                            { name: "Electromagnetism", size: 90 }
                        ]
                    },
                    {
                        name: "Engineering",
                        children: [
                            { name: "Signal Processing", size: 110 },
                            { name: "Control Systems", size: 85 },
                            { name: "Circuit Analysis", size: 95 }
                        ]
                    },
                    {
                        name: "Technology",
                        children: [
                            { name: "Digital Audio", size: 70 },
                            { name: "Image Processing", size: 75 },
                            { name: "Telecommunications", size: 105 }
                        ]
                    }
                ]
            };
            
            const root = d3.hierarchy(data)
                .sum(d => d.size || 50)
                .sort((a, b) => b.value - a.value);
            
            const treeLayout = d3.tree()
                .size([width - 100, height - 100]);
            
            treeLayout(root);
            
            // Links
            svg.selectAll('.link')
                .data(root.links())
                .enter()
                .append('path')
                .attr('class', 'link')
                .attr('d', d3.linkVertical()
                    .x(d => d.x + 50)
                    .y(d => d.y + 50))
                .attr('fill', 'none')
                .attr('stroke', '#ccc')
                .attr('stroke-width', 2);
            
            // Nodes
            const nodes = svg.selectAll('.node')
                .data(root.descendants())
                .enter()
                .append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${d.x + 50}, ${d.y + 50})`);
            
            nodes.append('circle')
                .attr('r', d => Math.sqrt(d.value) * 2)
                .attr('fill', d => d.depth === 0 ? '#667eea' : d.depth === 1 ? '#764ba2' : '#9b59b6')
                .attr('stroke', 'white')
                .attr('stroke-width', 2);
            
            nodes.append('text')
                .attr('dy', '0.3em')
                .attr('text-anchor', 'middle')
                .attr('fill', 'white')
                .style('font-size', d => d.depth === 0 ? '14px' : '10px')
                .text(d => d.data.name)
                .call(wrap, 80);
        }
        
        // Text wrapping helper
        function wrap(text, width) {
            text.each(function() {
                const text = d3.select(this);
                const words = text.text().split(/\s+/).reverse();
                let word;
                let line = [];
                let lineNumber = 0;
                const lineHeight = 1.1;
                const y = text.attr("y");
                const dy = parseFloat(text.attr("dy"));
                let tspan = text.text(null)
                    .append("tspan")
                    .attr("x", 0)
                    .attr("y", y)
                    .attr("dy", dy + "em");
                
                while (word = words.pop()) {
                    line.push(word);
                    tspan.text(line.join(" "));
                    if (tspan.node().getComputedTextLength() > width) {
                        line.pop();
                        tspan.text(line.join(" "));
                        line = [word];
                        tspan = text.append("tspan")
                            .attr("x", 0)
                            .attr("y", y)
                            .attr("dy", ++lineNumber * lineHeight + dy + "em")
                            .text(word);
                    }
                }
            });
        }

        // Proof display
        function showProof(type) {
            const proofContent = document.getElementById('proof-content');
            const tabs = document.querySelectorAll('.proof-tab');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            const proofs = {
                visual: `
                    <h3>Visual Understanding</h3>
                    <p>Watch as we trace the path of e<sup>it</sup> as t goes from 0 to π. The point moves along the unit circle, starting at 1 and ending at -1.</p>
                    <div id="visual-proof"></div>
                `,
                series: `
                    <h3>Series Expansion Proof</h3>
                    <p>Using Taylor series:</p>
                    <p>e<sup>x</sup> = 1 + x + x²/2! + x³/3! + ...</p>
                    <p>cos(x) = 1 - x²/2! + x⁴/4! - ...</p>
                    <p>sin(x) = x - x³/3! + x⁵/5! - ...</p>
                    <p>Substituting x = iθ and grouping real and imaginary parts:</p>
                    <p>e<sup>iθ</sup> = cos(θ) + i sin(θ)</p>
                    <p>When θ = π: e<sup>iπ</sup> = cos(π) + i sin(π) = -1 + 0i = -1</p>
                `,
                geometric: `
                    <h3>Geometric Interpretation</h3>
                    <p>In the complex plane, multiplication by e<sup>iθ</sup> represents a rotation by angle θ.</p>
                    <p>Starting at 1 and rotating by π radians (180°) brings us to -1.</p>
                    <p>This geometric view makes the identity intuitive: a half-turn rotation transforms 1 to -1.</p>
                `,
                formal: `
                    <h3>Formal Proof</h3>
                    <p>Define f(θ) = e<sup>iθ</sup> - cos(θ) - i sin(θ)</p>
                    <p>Taking the derivative: f'(θ) = ie<sup>iθ</sup> + sin(θ) - i cos(θ)</p>
                    <p>= i(e<sup>iθ</sup> - cos(θ) - i sin(θ)) = if(θ)</p>
                    <p>This differential equation f'(θ) = if(θ) with f(0) = 0 has unique solution f(θ) = 0</p>
                    <p>Therefore: e<sup>iθ</sup> = cos(θ) + i sin(θ) for all θ</p>
                    <p>Setting θ = π: e<sup>iπ</sup> = cos(π) + i sin(π) = -1</p>
                `
            };
            
            proofContent.innerHTML = proofs[type];
        }

        function navigateTo(path) {
            window.location.href = path;
        }

        function setUserLevel() {
            const level = levelSlider.value;
            localStorage.setItem('mathverse-user-level', level);
            alert(`Your level has been set to Level ${level}: ${levelDescriptions[level]}`);
        }

        // Initialize visualizations
        document.addEventListener('DOMContentLoaded', function() {
            createComplexPlaneJourney();
            createImpactTree();
            
            // Load user's saved level
            const savedLevel = localStorage.getItem('mathverse-user-level');
            if (savedLevel) {
                levelSlider.value = savedLevel;
                updateLevel(parseInt(savedLevel));
            }
        });
    </script>
    
    <!-- KaTeX -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ]
            });
        });
    </script>
    
    <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5635114711353420"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>